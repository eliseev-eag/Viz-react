{"version":3,"sources":["ducks.js","store.js","App/routes.js","selectors.js","App/DataEditorPage/DownloadButton.js","App/DataEditorPage/EditorTable.js","components/DateBox.js","components/constants.js","components/SelectBox.js","components/LazySelectSearch.js","components/WrappedComponents.js","App/DataEditorPage/validators.js","App/DataEditorPage/EventForm.js","App/DataEditorPage/routes.js","App/DataEditorPage/DataEditorPage.js","App/App.js","index.js"],"names":["loadEventsRequest","createAction","loadEventsSuccess","loadEventsFailure","editEvent","deleteEvent","addEvent","combineReducers","isFetching","handleActions","combineActions","error","state","data","eventTypes","payload","persons","toponyms","events","orderBy","map","event","startDate","Date","endDate","id","filter","uniqueId","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","rootReducer","applyMiddleware","thunk","editorDataPage","eventsSelector","toponymsSelector","personsSelector","eventTypesSelector","DownloadButton","filename","useSelector","content","JSON","stringify","download","href","URL","createObjectURL","Blob","type","DownloadOutlined","dateFormatter","date","toLocaleString","year","month","day","typeFormatter","personsFormatter","person","surname","name","patron","join","toponymsFormatter","toponym","startDateSorter","a","b","endDateSorter","EditorTable","onAdd","onSelect","deleteRow","setFilter","useState","eventsWithNestedData","useMemo","find","personId","toponymId","it","toLowerCase","includes","onRow","useCallback","record","onClick","undefined","onSearch","debounce","value","style","display","flexDirection","justifyContent","alignItems","padding","data-id","Search","placeholder","width","dataSource","rowKey","Column","title","dataIndex","sorter","render","filters","eventType","text","onFilter","_","onConfirm","stopPropagation","onCancel","okText","cancelText","DateBox","dateFormat","otherProps","format","ID_FACTORY","NAME_FACTORY","OPTIONS_DEFAULT_VALUE","SelectBox","options","optionKeyFactory","optionValueFactory","optionNameFactory","option","Option","DEFAULT_VALUE","LazySelectSearch","allOptions","onChange","count","filteredOptions","setFilteredOptions","inputValue","toLocaleLowerCase","onBlur","onChangeHandler","newValue","mappedValues","v","p","length","slice","uniq","hidedOptionsCount","mode","filterOption","disabled","wrapIntoField","Component","label","validate","allowNull","identity","parse","input","onFocus","meta","invalid","touched","Item","validateStatus","help","wrapIntoDebouncedInput","debounceTimeout","onChangeFormProps","viewValue","setViewValue","onChangeDebounced","updatedValue","target","WrappedTextArea","Input","TextArea","WrappedDateBox","WrappedSelectBox","WrappedLazySelectSearch","required","isNil","isArray","dateMoreThanOrEqual","fieldName","fieldLabel","allValues","isBefore","composeValidators","validators","reduce","validator","typeNameFactory","patronNameFactory","INITIAL_EVENT_VALUE","EventForm","onSubmit","onClose","eventId","useParams","placement","visible","closable","destroyOnClose","minHeight","size","Number","initialValues","moment","convertEventToFormFormat","values","handleSubmit","layout","onFinish","rows","isAfter","position","right","bottom","borderTop","background","textAlign","htmlType","addRoute","editRoute","DataEditorPage","dispatch","useDispatch","history","useHistory","push","generatePath","closeForm","changeEvent","toDate","message","success","onDelete","createEvent","showAddForm","ghost","extra","Content","path","ROUTES","App","collapsed","setCollapsed","pathname","useLocation","selectedMenuKeys","route","useEffect","async","eventsData","hasSider","Sider","theme","collapsible","onCollapse","overflow","height","left","selectedKeys","to","EditOutlined","marginLeft","transition","component","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.5cd1da24.chunk.js","sourcesContent":["import { combineReducers } from 'redux';\nimport { combineActions, createAction, handleActions } from 'redux-actions';\nimport { orderBy, uniqueId } from 'lodash-es';\n\nconst loadEventsRequest = createAction('loadEventsRequest');\nconst loadEventsSuccess = createAction('loadEventsSuccess');\nconst loadEventsFailure = createAction('loadEventsFailure');\n\nexport const loadEvents = () => async (dispatch) => {\n  dispatch(loadEventsRequest());\n  try {\n    const eventsData = await import('./events.json');\n    dispatch(loadEventsSuccess(eventsData));\n  } catch (error) {\n    dispatch(loadEventsFailure(error));\n  }\n};\n\nexport const editEvent = createAction('editEvent');\nexport const deleteEvent = createAction('deleteEvent');\nexport const addEvent = createAction('addEvent');\n\nexport default combineReducers({\n  isFetching: handleActions(\n    {\n      [loadEventsRequest]: () => true,\n      [combineActions(loadEventsSuccess, loadEventsFailure)]: () => false,\n    },\n    false,\n  ),\n  error: handleActions(\n    {\n      [loadEventsRequest]: () => null,\n      [loadEventsFailure]: (state, data) => data,\n    },\n    null,\n  ),\n  eventTypes: handleActions(\n    {\n      [loadEventsSuccess]: (state, data) => data.payload.eventTypes,\n    },\n    [],\n  ),\n  persons: handleActions(\n    {\n      [loadEventsSuccess]: (state, data) => data.payload.persons,\n    },\n    [],\n  ),\n  toponyms: handleActions(\n    {\n      [loadEventsSuccess]: (state, data) => data.payload.toponyms,\n    },\n    [],\n  ),\n  events: handleActions(\n    {\n      [loadEventsSuccess]: (state, data) =>\n        orderBy(\n          data.payload.events.map((event) => ({\n            ...event,\n            startDate: new Date(event.startDate),\n            endDate: new Date(event.endDate),\n          })),\n          (event) => event.endDate - event.startDate,\n          'desc',\n        ),\n      [editEvent]: (state, data) =>\n        state.map((event) =>\n          event.id === data.payload.id ? data.payload : event,\n        ),\n      [deleteEvent]: (state, data) =>\n        state.filter((event) => event.id !== data.payload.id),\n      [addEvent]: (state, data) => [\n        ...state,\n        { ...data.payload, id: uniqueId() },\n      ],\n    },\n    [],\n  ),\n});\n","import { applyMiddleware, compose, createStore } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './ducks';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  rootReducer,\n  composeEnhancers(applyMiddleware(thunk)),\n);\n\nexport default store;\n","export const editorDataPage = '/editor';\n","export const eventsSelector = (state) => state.events;\nexport const toponymsSelector = (state) => state.toponyms;\nexport const personsSelector = (state) => state.persons;\nexport const eventTypesSelector = (state) => state.eventTypes;\nexport const isFetchingSelector = (state) => state.isFetching;\nexport const errorSelector = (state) => state.error;\n","import { useSelector } from 'react-redux';\nimport { Button } from 'antd';\nimport { DownloadOutlined } from '@ant-design/icons';\nimport {\n  eventsSelector,\n  eventTypesSelector,\n  personsSelector,\n  toponymsSelector,\n} from 'selectors';\n\nconst DownloadButton = ({ filename = 'events.json' }) => {\n  const events = useSelector(eventsSelector);\n  const eventTypes = useSelector(eventTypesSelector);\n  const persons = useSelector(personsSelector);\n  const toponyms = useSelector(toponymsSelector);\n\n  const content = JSON.stringify({\n    events,\n    eventTypes,\n    toponyms,\n    persons,\n  });\n\n  return (\n    <Button\n      download={filename}\n      href={URL.createObjectURL(\n        new Blob([content], { type: 'application/json' }),\n      )}\n    >\n      <DownloadOutlined />\n      Export to json\n    </Button>\n  );\n};\n\nexport default DownloadButton;\n","import { useCallback, useMemo, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { debounce } from 'lodash-es';\nimport { Button, Input, Popconfirm, Table } from 'antd';\nimport {\n  eventsSelector,\n  eventTypesSelector,\n  personsSelector,\n  toponymsSelector,\n} from 'selectors';\n\nconst dateFormatter = (date) =>\n  date.toLocaleString('ru', {\n    year: 'numeric',\n    month: 'numeric',\n    day: 'numeric',\n  });\nconst typeFormatter = (type) => type.type;\nconst personsFormatter = (persons) =>\n  persons\n    .map((person) => `${person.surname} ${person.name} ${person.patron}`)\n    .join();\nconst toponymsFormatter = (toponyms) =>\n  toponyms.map((toponym) => toponym.name).join();\n\nconst startDateSorter = (a, b) => a.startDate - b.startDate;\n\nconst endDateSorter = (a, b) => a.endDate - b.endDate;\n\nconst EditorTable = ({ onAdd, onSelect, deleteRow }) => {\n  const [filter, setFilter] = useState('');\n  const eventTypes = useSelector(eventTypesSelector);\n  const persons = useSelector(personsSelector);\n  const toponyms = useSelector(toponymsSelector);\n  const events = useSelector(eventsSelector);\n\n  const eventsWithNestedData = useMemo(\n    () =>\n      events\n        .map((event) => ({\n          ...event,\n          type: eventTypes.find((type) => type.id === event.type),\n          persons: event.persons\n            ? event.persons.map((personId) =>\n                persons.find((person) => person.id === personId),\n              )\n            : [],\n          toponyms: event.toponyms\n            ? event.toponyms.map((toponymId) =>\n                toponyms.find((toponym) => toponym.id === toponymId),\n              )\n            : [],\n        }))\n        .filter((it) => it.name.toLowerCase().includes(filter.toLowerCase())),\n    [events, eventTypes, persons, toponyms, filter],\n  );\n\n  const onRow = useCallback(\n    (record) => ({\n      onClick: onSelect ? () => onSelect(record) : undefined,\n    }),\n    [onSelect],\n  );\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const onSearch = useCallback(\n    debounce((value) => setFilter(value)),\n    [],\n  );\n\n  const renderDeleteButton = (_, record) => (\n    <Popconfirm\n      title=\"Вы уверены?\"\n      onConfirm={(event) => {\n        event.stopPropagation();\n        deleteRow(record);\n      }}\n      onCancel={(event) => {\n        event.stopPropagation();\n      }}\n      okText=\"Да\"\n      cancelText=\"Нет\"\n    >\n      <Button\n        type=\"link\"\n        onClick={(event) => {\n          event.stopPropagation();\n        }}\n      >\n        Удалить\n      </Button>\n    </Popconfirm>\n  );\n\n  return (\n    <div>\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'row',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          padding: '10px 20px',\n        }}\n      >\n        <Button type=\"primary\" onClick={onAdd} data-id=\"add-button\">\n          Добавить\n        </Button>\n        <Input.Search\n          placeholder=\"Введите значение для поиска\"\n          onSearch={onSearch}\n          style={{ width: 400 }}\n          data-id=\"search\"\n        />\n      </div>\n      <Table\n        dataSource={eventsWithNestedData}\n        rowKey={(event) => event.id}\n        onRow={onRow}\n      >\n        <Table.Column title=\"Название\" dataIndex=\"name\" width=\"35%\" />\n        <Table.Column\n          title=\"Дата начала\"\n          dataIndex=\"startDate\"\n          width=\"10%\"\n          sorter={startDateSorter}\n          render={dateFormatter}\n        />\n        <Table.Column\n          title=\"Дата окончания\"\n          dataIndex=\"endDate\"\n          width=\"10%\"\n          sorter={endDateSorter}\n          render={dateFormatter}\n        />\n        <Table.Column\n          title=\"Тип\"\n          dataIndex=\"type\"\n          width=\"10%\"\n          filters={eventTypes.map((eventType) => ({\n            value: eventType.id,\n            text: eventType.type,\n          }))}\n          onFilter={(value, record) => record.type.id === value}\n          render={typeFormatter}\n        />\n        <Table.Column\n          title=\"Действующие лица\"\n          dataIndex=\"persons\"\n          width=\"15%\"\n          render={personsFormatter}\n        />\n        <Table.Column\n          title=\"Топонимы\"\n          dataIndex=\"toponyms\"\n          width=\"15%\"\n          render={toponymsFormatter}\n        />\n        <Table.Column title=\"\" key=\"delete\" render={renderDeleteButton} />\n      </Table>\n    </div>\n  );\n};\n\nexport default EditorTable;\n","import { DatePicker } from 'antd';\n\nconst DEFAULT_DATE_FORMAT = 'DD.MM.YYYY';\n\nconst DateBox = ({ dateFormat = DEFAULT_DATE_FORMAT, ...otherProps }) => (\n  <DatePicker format={dateFormat} {...otherProps} />\n);\n\nexport default DateBox;\n","export const ID_FACTORY = (it) => it.id;\n\nexport const NAME_FACTORY = (it) => it.name;\n","import { Select } from 'antd';\nimport { ID_FACTORY, NAME_FACTORY } from './constants';\n\nconst OPTIONS_DEFAULT_VALUE = [];\n\nconst SelectBox = ({\n  options = OPTIONS_DEFAULT_VALUE,\n  optionKeyFactory = ID_FACTORY,\n  optionValueFactory = ID_FACTORY,\n  optionNameFactory = NAME_FACTORY,\n  ...otherProps\n}) => (\n  <Select {...otherProps}>\n    {options.map((option) => (\n      <Select.Option\n        key={optionKeyFactory(option)}\n        value={optionValueFactory(option)}\n      >\n        {optionNameFactory(option)}\n      </Select.Option>\n    ))}\n  </Select>\n);\nexport default SelectBox;\n","import { useCallback, useMemo, useState } from 'react';\nimport { debounce, uniq } from 'lodash-es';\nimport { Select } from 'antd';\nimport { ID_FACTORY, NAME_FACTORY } from './constants';\n\nconst DEFAULT_VALUE = [];\n\nconst LazySelectSearch = ({\n  allOptions,\n  value = DEFAULT_VALUE,\n  onChange,\n  placeholder,\n  count = 5,\n  optionKeyFactory = ID_FACTORY,\n  optionValueFactory = ID_FACTORY,\n  optionNameFactory = NAME_FACTORY,\n}) => {\n  const [filteredOptions, setFilteredOptions] = useState([]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const onSearch = useCallback(\n    debounce((inputValue) => {\n      setFilteredOptions(\n        allOptions.filter((option) =>\n          optionNameFactory(option)\n            .toLowerCase()\n            .includes(inputValue.toLocaleLowerCase()),\n        ),\n      );\n    }, 300),\n    [allOptions],\n  );\n\n  const onBlur = useCallback(() => {\n    setFilteredOptions([]);\n  }, []);\n\n  const onChangeHandler = useCallback(\n    (newValue) => {\n      setFilteredOptions([]);\n      onChange(newValue);\n    },\n    [onChange],\n  );\n\n  const mappedValues = useMemo(\n    () => value.map((v) => allOptions.find((p) => optionValueFactory(p) === v)),\n    [allOptions, value, optionValueFactory],\n  );\n\n  const options = useMemo(\n    () =>\n      filteredOptions.length\n        ? filteredOptions.slice(0, count)\n        : uniq([...allOptions.slice(0, count), ...mappedValues]),\n    [allOptions, count, filteredOptions, mappedValues],\n  );\n  const hidedOptionsCount = useMemo(\n    () =>\n      filteredOptions.length\n        ? filteredOptions.length - count\n        : allOptions.length - options.length,\n    [allOptions, count, filteredOptions, options.length],\n  );\n\n  return (\n    <Select\n      placeholder={placeholder}\n      mode=\"multiple\"\n      filterOption={false}\n      onSearch={onSearch}\n      onChange={onChangeHandler}\n      onBlur={onBlur}\n      value={value}\n    >\n      {options.map((option) => (\n        <Select.Option\n          key={optionKeyFactory(option)}\n          value={optionValueFactory(option)}\n        >\n          {optionNameFactory(option)}\n        </Select.Option>\n      ))}\n      {hidedOptionsCount > 0 && (\n        <Select.Option\n          key=\"__hidedOptionsCount__\"\n          value=\"__hidedOptionsCount__\"\n          disabled\n        >\n          Еще {hidedOptionsCount} вариантов\n        </Select.Option>\n      )}\n    </Select>\n  );\n};\n\nexport default LazySelectSearch;\n","import { useCallback, useState } from 'react';\nimport { debounce, identity } from 'lodash-es';\nimport { Field } from 'react-final-form';\nimport { Form, Input } from 'antd';\nimport DateBox from './DateBox';\nimport SelectBox from './SelectBox';\nimport LazySelectSearch from './LazySelectSearch';\n\nconst wrapIntoField =\n  (Component) =>\n  ({\n    name,\n    label,\n    validate,\n    allowNull = true,\n    format = identity,\n    parse = identity,\n    ...otherProps\n  }) =>\n    (\n      <Field\n        name={name}\n        format={format}\n        parse={parse}\n        allowNull={allowNull}\n        validate={validate}\n      >\n        {({\n          input: { value, onChange, onBlur, onFocus },\n          meta: { invalid, touched, error },\n        }) => (\n          <Form.Item\n            label={label}\n            validateStatus={touched && invalid ? 'error' : 'success'}\n            help={touched && invalid ? error : undefined}\n          >\n            <Component\n              name={name}\n              value={value}\n              onChange={onChange}\n              onBlur={onBlur}\n              onFocus={onFocus}\n              {...otherProps}\n            />\n          </Form.Item>\n        )}\n      </Field>\n    );\n\nconst wrapIntoDebouncedInput = (Component) =>\n  function DebouncedInput({\n    debounceTimeout = 300,\n    onChange: onChangeFormProps,\n    value,\n    ...otherProps\n  }) {\n    const [viewValue, setViewValue] = useState(value);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const onChangeDebounced = useCallback(\n      debounce((updatedValue) => {\n        onChangeFormProps(updatedValue);\n      }, debounceTimeout),\n      [],\n    );\n\n    const onChange = useCallback(\n      ({ target: { value: newValue } }) => {\n        setViewValue(newValue);\n        onChangeDebounced(newValue);\n      },\n      [onChangeDebounced],\n    );\n\n    return <Component value={viewValue} onChange={onChange} {...otherProps} />;\n  };\n\nconst WrappedInput = wrapIntoField(wrapIntoDebouncedInput(Input));\n\nconst WrappedTextArea = wrapIntoField(wrapIntoDebouncedInput(Input.TextArea));\n\nconst WrappedDateBox = wrapIntoField(DateBox);\n\nconst WrappedSelectBox = wrapIntoField(SelectBox);\n\nconst WrappedLazySelectSearch = wrapIntoField(LazySelectSearch);\n\nexport {\n  WrappedInput as Input,\n  WrappedTextArea as TextArea,\n  WrappedDateBox as DateBox,\n  WrappedSelectBox as SelectBox,\n  WrappedLazySelectSearch as LazySelectSearch,\n};\n","import { isArray, isNil } from 'lodash-es';\n\nexport const required = (value) =>\n  isNil(value) || value === '' || (isArray(value) && value.length === 0)\n    ? 'Поле обязательно'\n    : undefined;\n\nexport const dateLessThanOrEqual =\n  (fieldName, fieldLabel) => (value, allValues) =>\n    value.isAfter(allValues[fieldName], 'day')\n      ? `Значение поля должно быть меньше чем ${fieldLabel}`\n      : undefined;\n\nexport const dateMoreThanOrEqual =\n  (fieldName, fieldLabel) => (value, allValues) =>\n    value.isBefore(allValues[fieldName], 'day')\n      ? `Значение поля должно быть больше чем ${fieldLabel}`\n      : undefined;\n\nexport const moreThanOrEqual = (fieldName, fieldLabel) => (value, allValues) =>\n  value < allValues[fieldName]\n    ? `Значение поля должно быть больше чем ${fieldLabel}`\n    : undefined;\n\nexport const lessThanOrEqual = (fieldName, fieldLabel) => (value, allValues) =>\n  value > allValues[fieldName]\n    ? `Значение поля должно быть меньше чем ${fieldLabel}`\n    : undefined;\n\nexport const composeValidators =\n  (...validators) =>\n  (value, allValues, meta) =>\n    validators.reduce(\n      (error, validator) => error || validator(value, allValues, meta),\n      undefined,\n    );\n","import { useSelector } from 'react-redux';\nimport { Form as FinalForm } from 'react-final-form';\nimport { useParams } from 'react-router-dom';\nimport { Button, Drawer, Form, Spin } from 'antd';\nimport moment from 'moment';\nimport { DateBox, LazySelectSearch, SelectBox, TextArea } from 'components';\nimport {\n  eventsSelector,\n  eventTypesSelector,\n  personsSelector,\n  toponymsSelector,\n} from 'selectors';\nimport {\n  composeValidators,\n  dateLessThanOrEqual,\n  dateMoreThanOrEqual,\n  required,\n} from './validators';\n\nconst typeNameFactory = (it) => it.type;\n\nconst patronNameFactory = (it) => `${it.surname} ${it.name} ${it.patron}`;\n\nconst convertEventToFormFormat = (event) => ({\n  ...event,\n  startDate: moment(event.startDate),\n  endDate: moment(event.endDate),\n});\n\nconst INITIAL_EVENT_VALUE = {\n  name: null,\n  startDate: null,\n  endDate: null,\n  type: null,\n  toponyms: [],\n  persons: [],\n};\n\nconst EventForm = ({ onSubmit, onClose, title }) => {\n  const eventTypes = useSelector(eventTypesSelector);\n  const toponyms = useSelector(toponymsSelector);\n  const persons = useSelector(personsSelector);\n  const events = useSelector(eventsSelector);\n  const { id: eventId } = useParams();\n\n  if (events.length < 1) {\n    return (\n      <Drawer\n        title={title}\n        onClose={onClose}\n        placement=\"right\"\n        width={450}\n        visible\n        closable\n        destroyOnClose\n      >\n        <div\n          style={{\n            minHeight: 200,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n          }}\n        >\n          <Spin size=\"large\" />\n        </div>\n      </Drawer>\n    );\n  }\n\n  const event = events.find((it) => it.id === Number(eventId));\n\n  const initialValues = event\n    ? convertEventToFormFormat(event)\n    : INITIAL_EVENT_VALUE;\n\n  return (\n    <Drawer\n      title={title}\n      onClose={onClose}\n      placement=\"right\"\n      width={450}\n      visible\n      closable\n      destroyOnClose\n    >\n      <FinalForm\n        initialValues={initialValues}\n        onSubmit={(values) => {\n          onSubmit(values);\n        }}\n      >\n        {({ handleSubmit }) => (\n          <Form layout=\"vertical\" onFinish={handleSubmit}>\n            <Form.Item>\n              <TextArea\n                name=\"name\"\n                label=\"Название\"\n                rows={4}\n                placeholder=\"Название\"\n                validate={required}\n              />\n            </Form.Item>\n            <Form.Item>\n              <DateBox\n                name=\"startDate\"\n                label=\"Дата начала\"\n                validate={composeValidators(\n                  required,\n                  dateLessThanOrEqual('endDate', 'Дата окончания'),\n                )}\n              />\n            </Form.Item>\n            <Form.Item>\n              <DateBox\n                name=\"endDate\"\n                label=\"Дата окончания\"\n                validate={composeValidators(\n                  required,\n                  dateMoreThanOrEqual('startDate', 'Дата начала'),\n                )}\n              />\n            </Form.Item>\n            <Form.Item>\n              <SelectBox\n                name=\"type\"\n                label=\"Тип\"\n                options={eventTypes}\n                optionNameFactory={typeNameFactory}\n                validate={required}\n              />\n            </Form.Item>\n            <Form.Item>\n              <LazySelectSearch\n                name=\"toponyms\"\n                label=\"Топонимы\"\n                allOptions={toponyms}\n                placeholder=\"Выберите топонимы\"\n              />\n            </Form.Item>\n            <Form.Item>\n              <LazySelectSearch\n                name=\"persons\"\n                label=\"Действующие лица\"\n                allOptions={persons}\n                optionNameFactory={patronNameFactory}\n                placeholder=\"Выберите действующих лиц\"\n              />\n            </Form.Item>\n            <div\n              style={{\n                position: 'absolute',\n                right: 0,\n                bottom: 0,\n                width: '100%',\n                borderTop: '1px solid #e9e9e9',\n                padding: '10px 16px',\n                background: '#fff',\n                textAlign: 'right',\n              }}\n            >\n              <Button htmlType=\"submit\" type=\"primary\" data-id=\"save-button\">\n                Сохранить\n              </Button>\n            </div>\n          </Form>\n        )}\n      </FinalForm>\n    </Drawer>\n  );\n};\n\nexport default EventForm;\n","import { editorDataPage } from 'App/routes';\n\nexport const addRoute = `${editorDataPage}/add`;\n\nexport const editRoute = `${editorDataPage}/edit/:id`;\n","import { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { generatePath, Route, useHistory } from 'react-router-dom';\nimport { Layout, message, PageHeader } from 'antd';\nimport { uniqueId } from 'lodash-es';\nimport { addEvent, deleteEvent, editEvent } from 'ducks';\nimport { editorDataPage } from 'App/routes';\nimport DownloadButton from './DownloadButton';\nimport EditorTable from './EditorTable';\nimport EventForm from './EventForm';\nimport { addRoute, editRoute } from './routes';\n\nconst DataEditorPage = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const onSelect = useCallback(\n    (value) => {\n      history.push(generatePath(editRoute, { id: value.id }));\n    },\n    [history],\n  );\n\n  const closeForm = useCallback(() => {\n    history.push(editorDataPage);\n  }, [history]);\n\n  const changeEvent = useCallback(\n    (value) => {\n      dispatch(\n        editEvent({\n          ...value,\n          endDate: value.endDate.toDate(),\n          startDate: value.startDate.toDate(),\n        }),\n      );\n      closeForm();\n      message.success('Событие успешно изменено');\n    },\n    [dispatch, closeForm],\n  );\n\n  const onDelete = useCallback(\n    (value) => {\n      dispatch(deleteEvent(value));\n    },\n    [dispatch],\n  );\n\n  const createEvent = useCallback(\n    (value) => {\n      dispatch(\n        addEvent({\n          ...value,\n          id: uniqueId(),\n          endDate: value.endDate.toDate(),\n          startDate: value.startDate.toDate(),\n        }),\n      );\n      closeForm();\n      message.success('Событие успешно добавлено');\n    },\n    [closeForm, dispatch],\n  );\n\n  const showAddForm = useCallback(() => {\n    history.push(addRoute);\n  }, [history]);\n\n  return (\n    <Layout>\n      <PageHeader\n        ghost={false}\n        title=\"Редактирование данных\"\n        extra={<DownloadButton />}\n      />\n      <Layout.Content>\n        <EditorTable\n          onAdd={showAddForm}\n          onSelect={onSelect}\n          deleteRow={onDelete}\n        />\n        <Route\n          path={addRoute}\n          render={() => (\n            <EventForm\n              onClose={closeForm}\n              onSubmit={createEvent}\n              title=\"Добавление события\"\n            />\n          )}\n        />\n        <Route\n          path={editRoute}\n          render={() => (\n            <EventForm\n              onClose={closeForm}\n              onSubmit={changeEvent}\n              title=\"Редактирование события\"\n            />\n          )}\n        />\n      </Layout.Content>\n    </Layout>\n  );\n};\n\nexport default DataEditorPage;\n","import { useEffect, useMemo, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Link, Redirect, Route, Switch, useLocation } from 'react-router-dom';\nimport { Layout, Menu } from 'antd';\nimport { EditOutlined } from '@ant-design/icons';\nimport { loadEvents } from '../ducks';\nimport DataEditorPage from './DataEditorPage';\nimport { editorDataPage } from './routes';\n\nconst ROUTES = [editorDataPage];\n\nconst FULL_SLIDER_WIDTH = 240;\n\nconst App = () => {\n  const [collapsed, setCollapsed] = useState(true);\n  const dispatch = useDispatch();\n  const { pathname } = useLocation();\n\n  const selectedMenuKeys = useMemo(\n    () => [ROUTES.find((route) => route === pathname)],\n    [pathname],\n  );\n\n  useEffect(() => {\n    dispatch(loadEvents());\n  }, [dispatch]);\n\n  return (\n    <Layout style={{ minHeight: '100vh' }} hasSider>\n      <Layout.Sider\n        theme=\"dark\"\n        collapsible\n        width={FULL_SLIDER_WIDTH}\n        collapsed={collapsed}\n        onCollapse={setCollapsed}\n        style={{\n          overflow: 'auto',\n          height: '100vh',\n          position: 'fixed',\n          left: 0,\n        }}\n      >\n        <Menu theme=\"dark\" mode=\"inline\" selectedKeys={selectedMenuKeys}>\n          <Menu.Item key={editorDataPage}>\n            <Link to={editorDataPage}>\n              <EditOutlined />\n              <span>Редактирование данных</span>\n            </Link>\n          </Menu.Item>\n        </Menu>\n      </Layout.Sider>\n      <Layout\n        style={{\n          marginLeft: collapsed ? 80 : FULL_SLIDER_WIDTH,\n          transition: 'margin 0.2s',\n        }}\n      >\n        <Layout.Content>\n          <Switch>\n            <Route path={editorDataPage} component={DataEditorPage} />\n            <Redirect to={editorDataPage} />\n          </Switch>\n        </Layout.Content>\n      </Layout>\n    </Layout>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { HashRouter as Router } from 'react-router-dom';\nimport store from './store';\nimport App from './App/App';\nimport './index.css';\n\nconst renderApp = () => (\n  <Router>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </Router>\n);\n\nReactDOM.render(renderApp(), document.getElementById('root'));\n"],"sourceRoot":""}